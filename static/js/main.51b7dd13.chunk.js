(this.webpackJsonpwww=this.webpackJsonpwww||[]).push([[0],{154:function(e,t,a){"use strict";var r=a(80),n=r(a(0)),u=r(a(24));a(159);var o=r(a(160)),l=r(a(445));u.default.render(n.default.createElement(n.default.StrictMode,null,n.default.createElement(o.default,null)),document.getElementById("root")),(0,l.default)(console.log)},159:function(e,t,a){},160:function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(80);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,__webpack_require__(161);var _configProvider=_interopRequireDefault(__webpack_require__(19));__webpack_require__(216);var _spin=_interopRequireDefault(__webpack_require__(218));__webpack_require__(227);var _popover=_interopRequireDefault(__webpack_require__(229));__webpack_require__(88);var _tooltip=_interopRequireDefault(__webpack_require__(68));__webpack_require__(89);var _button=_interopRequireDefault(__webpack_require__(90));__webpack_require__(242);var _form=_interopRequireDefault(__webpack_require__(246));__webpack_require__(329);var _select=_interopRequireDefault(__webpack_require__(333)),_objectSpread2=_interopRequireDefault(__webpack_require__(131)),_regenerator=_interopRequireDefault(__webpack_require__(343));__webpack_require__(132);var _message2=_interopRequireDefault(__webpack_require__(63)),_asyncToGenerator2=_interopRequireDefault(__webpack_require__(345));__webpack_require__(346);var _layout=_interopRequireDefault(__webpack_require__(348));__webpack_require__(360);var _input=_interopRequireDefault(__webpack_require__(362)),_slicedToArray2=_interopRequireDefault(__webpack_require__(151)),_react=_interopRequireDefault(__webpack_require__(0)),_AppModule=_interopRequireDefault(__webpack_require__(374)),_axios=_interopRequireDefault(__webpack_require__(375)),_zh_CN=_interopRequireDefault(__webpack_require__(393)),_icons=__webpack_require__(150),_isHotkey=_interopRequireDefault(__webpack_require__(397)),_home=_interopRequireDefault(__webpack_require__(398)),_modules=_interopRequireDefault(__webpack_require__(438)),_reactAce=_interopRequireDefault(__webpack_require__(145)),useLocalStorageState=function(e,t){var a=_react.default.useMemo((function(){try{return JSON.parse(localStorage.getItem("localStorage_".concat(e)))}catch(t){}return null}),[]),r=_react.default.useState(a||t),n=(0,_slicedToArray2.default)(r,2),u=n[0],o=n[1],l=_react.default.useRef(!1);return _react.default.useLayoutEffect((function(){l.current?localStorage.setItem("localStorage_".concat(e),JSON.stringify(u)):l.current=!0}),[u]),[u,o]},TextArea=_input.default.TextArea,Header=_layout.default.Header,Content=_layout.default.Content,Footer=_layout.default.Footer,CONFIG=JSON.stringify({axiosRequest:"axios",commonConfig:{responseData:!0},splitModule:!0,prefix:"/* eslint-disable */\n// @ts-nocheck\n",suffix:""},null,2);function App(){var _React$useState3=_react.default.useState(!1),_React$useState4=(0,_slicedToArray2.default)(_React$useState3,2),loading=_React$useState4[0],setLoading=_React$useState4[1],_React$useState5=_react.default.useState("{}"),_React$useState6=(0,_slicedToArray2.default)(_React$useState5,2),jsonText=_React$useState6[0],setJsonText=_React$useState6[1],_useLocalStorageState=useLocalStorageState("transform-type",{type:"to-swagger-axios",config:CONFIG}),_useLocalStorageState2=(0,_slicedToArray2.default)(_useLocalStorageState,2),transform=_useLocalStorageState2[0],setTransform=_useLocalStorageState2[1],_useLocalStorageState3=useLocalStorageState("import-type","url"),_useLocalStorageState4=(0,_slicedToArray2.default)(_useLocalStorageState3,2),type=_useLocalStorageState4[0],setType=_useLocalStorageState4[1],_useLocalStorageState5=useLocalStorageState("import-value-url",""),_useLocalStorageState6=(0,_slicedToArray2.default)(_useLocalStorageState5,2),urlText=_useLocalStorageState6[0],setUrlText=_useLocalStorageState6[1],_useLocalStorageState7=useLocalStorageState("import-value-js",""),_useLocalStorageState8=(0,_slicedToArray2.default)(_useLocalStorageState7,2),jsText=_useLocalStorageState8[0],setJsText=_useLocalStorageState8[1];_react.default.useEffect((function(){}));var onSearch=_react.default.useCallback(function(){var _ref=(0,_asyncToGenerator2.default)(_regenerator.default.mark((function _callee(val){var res,_res,_e$config$method,_e$response;return _regenerator.default.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(setLoading(!0),_context.prev=1,"js"!==type){_context.next=19;break}if(val=jsText,val){_context.next=6;break}return _context.abrupt("return");case 6:return _context.next=8,eval(val);case 8:if(res=_context.sent,200!==res.status){_context.next=17;break}return _context.t0=setJsonText,_context.t1=JSON,_context.next=14,res.json();case 14:_context.t2=_context.sent,_context.t3=_context.t1.stringify.call(_context.t1,_context.t2,null,2),(0,_context.t0)(_context.t3);case 17:_context.next=26;break;case 19:if(val=urlText,val){_context.next=22;break}return _context.abrupt("return");case 22:return _context.next=24,_axios.default.get(val.trim(),{responseType:"json",withCredentials:!0});case 24:_res=_context.sent,200===_res.status&&setJsonText(JSON.stringify(_res.data,null,2));case 26:_context.next=31;break;case 28:_context.prev=28,_context.t4=_context.catch(1),_message2.default.error(_context.t4.config?"".concat(null===(_e$config$method=_context.t4.config.method)||void 0===_e$config$method?void 0:_e$config$method.toUpperCase()," ").concat(_context.t4.config.url," (").concat((null===(_e$response=_context.t4.response)||void 0===_e$response?void 0:_e$response.status)||"-",")"):String(_context.t4));case 31:return _context.prev=31,setLoading(!1),_context.finish(31);case 34:case"end":return _context.stop()}}),_callee,null,[[1,28,31,34]])})));return function(e){return _ref.apply(this,arguments)}}(),[type,urlText,jsonText]);_react.default.useEffect((function(){onSearch()}),[]);var config=_react.default.useMemo((function(){try{return JSON.parse(transform.config)}catch(e){}return null}),[transform.config]);return _react.default.createElement(_configProvider.default,{locale:_zh_CN.default,theme:"light"},_react.default.createElement(_layout.default,{className:_AppModule.default.App,theme:"light"},_react.default.createElement(Header,{className:_AppModule.default.header},_react.default.createElement("span",{className:_AppModule.default.logo},"Transform json schema"),_react.default.createElement(_form.default.Item,{label:"\u8f6c\u6362\u7c7b\u578b",wrapperCol:{style:{width:150}}},_react.default.createElement(_select.default,{value:transform.type,className:_AppModule.default.select,onChange:function(e){setTransform((function(t){return(0,_objectSpread2.default)((0,_objectSpread2.default)({},t),{},{type:e})}))}},Object.keys(_modules.default).map((function(e){return _react.default.createElement(_select.default.Option,{key:e,value:e},e)})))),_react.default.createElement(_popover.default,{content:_react.default.createElement(_reactAce.default,{className:_AppModule.default.paramsEditor,value:transform.config,onChange:function(e){setTransform((function(t){return(0,_objectSpread2.default)((0,_objectSpread2.default)({},t),{},{config:e})}))},mode:"json",theme:"github"})},_react.default.createElement(_tooltip.default,{title:"\u8bbe\u7f6e\u8f6c\u6362\u914d\u7f6e",placement:"right"},_react.default.createElement(_button.default,{style:{marginLeft:10},icon:_react.default.createElement(_icons.SettingOutlined,null)}))),_react.default.createElement("div",{className:_AppModule.default.btns},_react.default.createElement(_select.default,{value:type,onChange:function(e){return setType(e)}},_react.default.createElement(_select.default.Option,{value:"url"},"\u4ece URL \u5bfc\u5165"),_react.default.createElement(_select.default.Option,{value:"js"},"\u4ece JS \u811a\u672c \u5bfc\u5165")),"url"===type&&_react.default.createElement(_input.default.Search,{value:urlText,onChange:function(e){return setUrlText(e.target.value)},enterButton:"\u5bfc\u5165",placeholder:"\u4ece URL \u5bfc\u5165",onSearch:onSearch,className:_AppModule.default.search}),"js"===type&&_react.default.createElement("div",{className:_AppModule.default.jsTextareaWrapper},_react.default.createElement(_popover.default,{destroyTooltipOnHide:!0,content:_react.default.createElement(TextArea,{autoFocus:!0,style:{width:400},rows:10,value:jsText,onChange:function(e){return setJsText(e.target.value)},placeholder:"\u8f93\u5165 JS \u8bf7\u6c42\u811a\u672c\uff0c\u5177\u4f53\u53ef\u4ee5\u4f7f\u7528 Chrome Network \u4e2d\u7684 Copy as fetch"}),trigger:"click"},_react.default.createElement(_input.default.Search,{readOnly:!0,onSearch:onSearch,className:_AppModule.default.jsTextarea,value:jsText,enterButton:"\u5bfc\u5165",placeholder:"\u8f93\u5165 JS \u8bf7\u6c42\u811a\u672c\uff0c\u5177\u4f53\u53ef\u4ee5\u4f7f\u7528 Chrome Network \u4e2d\u7684 Copy as fetch"}))))),_react.default.createElement(Content,{style:{padding:"0 50px"},className:_AppModule.default.body},_react.default.createElement(_spin.default,{spinning:loading,wrapperClassName:_AppModule.default.loading,delay:400},_react.default.createElement(_home.default,{type:transform.type,config:config,jsonText:jsonText,onJsonTextChange:setJsonText})))))}var _default=App;exports.default=_default},374:function(e,t,a){e.exports={App:"App_App__15LM-",header:"App_header__2L3DO",search:"App_search__13zFb",jsTextareaWrapper:"App_jsTextareaWrapper__25Ez6",jsTextarea:"App_jsTextarea__2yuDh",btns:"App_btns__15KWL",loading:"App_loading__3Rsj5",clickable:"App_clickable__Fqvmh",logo:"App_logo__2qPv-",body:"App_body__2a4FT",paramsEditor:"App_paramsEditor__oCSss"}},398:function(e,t,a){"use strict";var r=a(399),n=a(80);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(401);var u=n(a(403)),o=n(a(95)),l=n(a(131)),_=n(a(410));a(132);var c=n(a(63));a(88);var s=n(a(68));a(89);var i=n(a(90)),f=n(a(151)),d=r(a(0)),p=n(a(450)),m=n(a(411)),g=a(418),x=a(150),S=n(a(419)),v=n(a(145));a(427),a(428),a(429),a(430),a(431),a(432),a(433);var b=n(a(434)),y=n(a(435)),h=n(a(436)),k=new(n(a(437)).default),w=new h.default(k);window.jsonlint=y.default;var E=function(e){var t=e.text,a=d.default.useState(""),r=(0,f.default)(a,2),n=r[0],u=r[1],o=(0,d.useRef)(null),l=(0,d.useCallback)((function(){o.current&&(clearTimeout(o.current),o.current=null);try{(0,b.default)(t),u("ok")}catch(e){u("fail")}finally{o.current=setTimeout((function(){u()}),2e3)}}),[t]);return d.default.createElement("div",{className:S.default.floatBtns},d.default.createElement(s.default,{onVisibleChange:function(e){e||(o.current&&(clearTimeout(o.current),o.current=null),u())},title:n?"ok"===n?"\u590d\u5236\u6210\u529f":"\u590d\u5236\u5931\u8d25":"\u590d\u5236"},d.default.createElement(i.default,{icon:d.default.createElement(x.CopyFilled,null),size:"small",type:"link",onClick:l})))};var q=function(e){var t=e.type,a=void 0===t?"to-ts":t,r=e.config,n=e.defaultJsonText,b=e.jsonText,y=e.onJsonTextChange,h=(0,p.default)({value:b,onChange:y,defaultValue:n||"{}"}),k=(0,f.default)(h,2),q=k[0],T=k[1],j=d.default.useState(""),R=(0,f.default)(j,2),A=R[0],L=R[1],C=d.default.useState(!1),N=(0,f.default)(C,2),O=N[0],D=N[1];return d.default.useEffect((function(){try{var e=JSON.parse(q);e&&(D(!0),w.postMessage([a,e,r]).then((function(e){L(e)})).catch((function(e){e&&(console.error(e),c.default.error(String(e)))})).finally((function(){return D(!1)})))}catch(t){console.error(t)}}),[a,r,q]),d.default.createElement("div",{className:S.default.container},d.default.createElement(v.default,{className:S.default.jsonEditor,mode:"json",value:q,theme:"github",onChange:function(e){return T(e)},editorProps:{$blockScrolling:!0}}),O&&d.default.createElement("div",{className:S.default.transfroming},d.default.createElement(x.LoadingOutlined,{style:{fontSize:20,color:"#1890ff"}})),"string"===typeof A&&d.default.createElement("div",{className:S.default.wrapperResult},d.default.createElement(v.default,{className:S.default.resultEditor,mode:"typescript",value:A,theme:"github",onChange:function(e){return L(e)},editorProps:{$blockScrolling:!0}}),d.default.createElement(E,{text:A})),"object"===(0,_.default)(A)&&A&&d.default.createElement("div",{className:S.default.wrapperResult},d.default.createElement(u.default,{size:"small",tabBarGutter:0,tabPosition:"left",defaultActiveKey:Object.keys(A)[0],tabBarExtraContent:d.default.createElement(s.default,{title:"\u4e0b\u8f7d ZIP"},d.default.createElement(i.default,{size:"small",type:"primary",onClick:function(){var e=new m.default;Object.keys(A).forEach((function(t){e.file(t,A[t])})),e.generateAsync({type:"blob"}).then((function(e){(0,g.saveAs)(e,"transform-json-schema-result.zip")}))}},"\u4e0b\u8f7d"))},Object.keys(A).map((function(e){return d.default.createElement(u.default.TabPane,{tab:e,key:e},d.default.createElement(v.default,{className:S.default.subEditor,mode:"typescript",value:A[e],theme:"github",onChange:function(t){return L((0,l.default)((0,l.default)({},A),{},(0,o.default)({},e,t)))},editorProps:{$blockScrolling:!0}}),d.default.createElement(E,{text:A[e]}))})))))};t.default=q},419:function(e,t,a){e.exports={result:"style_result__sHPbb",floatBtns:"style_floatBtns__3vRWO",container:"style_container__TPmxo",transfroming:"style_transfroming__umP0B",jsonEditor:"style_jsonEditor__dG7Rz",resultEditor:"style_resultEditor__1ZfRb",wrapperResult:"style_wrapperResult__2yfYP",subEditor:"style_subEditor__39vb3"}},437:function(e,t,a){"use strict";function r(){return new Worker(a.p+"static/js/transform-worker.99f64dc3.worker.js")}a.r(t),a.d(t,"default",(function(){return r}))},438:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(439),n=a(440),u=n.keys().reduce((function(e,t){return e[(0,r.basename)(t,(0,r.extname)(t))]=n(t),e}),{});t.default=u},440:function(e,t,a){var r={"./to-swagger-axios.js":441,"./to-ts.js":442,"./to-vm.js":443,"./to-walli.js":444};function n(e){var t=u(e);return a(t)}function u(e){if(!a.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}n.keys=function(){return Object.keys(r)},n.resolve=u,e.exports=n,n.id=440},441:function(e,t){},442:function(e,t){},443:function(e,t){},444:function(e,t){},445:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){};t.default=r}},[[154,1,2]]]);
//# sourceMappingURL=main.51b7dd13.chunk.js.map
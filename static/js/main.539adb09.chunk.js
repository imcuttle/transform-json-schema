(this.webpackJsonpwww=this.webpackJsonpwww||[]).push([[0],{153:function(e,t,a){"use strict";var r=a(79),o=r(a(0)),n=r(a(25));a(158);var l=r(a(159)),u=r(a(450));n.default.render(o.default.createElement(o.default.StrictMode,null,o.default.createElement(l.default,null)),document.getElementById("root")),(0,u.default)(console.log)},158:function(e,t,a){},159:function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(79);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,__webpack_require__(160);var _configProvider=_interopRequireDefault(__webpack_require__(19));__webpack_require__(215);var _spin=_interopRequireDefault(__webpack_require__(217));__webpack_require__(226);var _popover=_interopRequireDefault(__webpack_require__(228));__webpack_require__(87);var _tooltip=_interopRequireDefault(__webpack_require__(68));__webpack_require__(88);var _button=_interopRequireDefault(__webpack_require__(89));__webpack_require__(241);var _form=_interopRequireDefault(__webpack_require__(245));__webpack_require__(328);var _select=_interopRequireDefault(__webpack_require__(332)),_objectSpread2=_interopRequireDefault(__webpack_require__(132)),_regenerator=_interopRequireDefault(__webpack_require__(342)),_asyncToGenerator2=_interopRequireDefault(__webpack_require__(343));__webpack_require__(133);var _message2=_interopRequireDefault(__webpack_require__(63));__webpack_require__(345);var _layout=_interopRequireDefault(__webpack_require__(347));__webpack_require__(359);var _input=_interopRequireDefault(__webpack_require__(361)),_slicedToArray2=_interopRequireDefault(__webpack_require__(150)),_react=_interopRequireDefault(__webpack_require__(0)),_AppModule=_interopRequireDefault(__webpack_require__(373)),_axios=_interopRequireDefault(__webpack_require__(374)),_zh_CN=_interopRequireDefault(__webpack_require__(392)),_icons=__webpack_require__(149),_isHotkey=_interopRequireDefault(__webpack_require__(396)),_home=_interopRequireDefault(__webpack_require__(397)),_modules=_interopRequireDefault(__webpack_require__(443)),_reactCodemirror=__webpack_require__(146),useLocalStorageState=function(e,t){var a=_react.default.useMemo((function(){try{return JSON.parse(localStorage.getItem("localStorage_".concat(e)))}catch(t){}return null}),[]),r=_react.default.useState(a||t),o=(0,_slicedToArray2.default)(r,2),n=o[0],l=o[1],u=_react.default.useRef(!1);return _react.default.useLayoutEffect((function(){u.current?localStorage.setItem("localStorage_".concat(e),JSON.stringify(n)):u.current=!0}),[n]),[n,l]},TextArea=_input.default.TextArea,Header=_layout.default.Header,Content=_layout.default.Content,Footer=_layout.default.Footer,CONFIG=JSON.stringify({axiosRequest:"axios",commonConfig:{responseData:!0},splitModule:!0,prefix:"/* eslint-disable */\n// @ts-nocheck\n",suffix:""},null,2);function App(){var _React$useState3=_react.default.useState(!1),_React$useState4=(0,_slicedToArray2.default)(_React$useState3,2),loading=_React$useState4[0],setLoading=_React$useState4[1],_React$useState5=_react.default.useState("{}"),_React$useState6=(0,_slicedToArray2.default)(_React$useState5,2),jsonText=_React$useState6[0],setJsonText=_React$useState6[1],_useLocalStorageState=useLocalStorageState("transform-type",{type:"to-swagger-axios",config:CONFIG}),_useLocalStorageState2=(0,_slicedToArray2.default)(_useLocalStorageState,2),transform=_useLocalStorageState2[0],setTransform=_useLocalStorageState2[1],_useLocalStorageState3=useLocalStorageState("import-type","url"),_useLocalStorageState4=(0,_slicedToArray2.default)(_useLocalStorageState3,2),type=_useLocalStorageState4[0],setType=_useLocalStorageState4[1],_useLocalStorageState5=useLocalStorageState("import-value-url",""),_useLocalStorageState6=(0,_slicedToArray2.default)(_useLocalStorageState5,2),urlText=_useLocalStorageState6[0],setUrlText=_useLocalStorageState6[1],_useLocalStorageState7=useLocalStorageState("import-value-js",""),_useLocalStorageState8=(0,_slicedToArray2.default)(_useLocalStorageState7,2),jsText=_useLocalStorageState8[0],setJsText=_useLocalStorageState8[1];_react.default.useEffect((function(){var e=function(e){"TEXTAREA"!==e.target.tagName&&(0,_isHotkey.default)("mod+f",e)&&(e.preventDefault(),_message2.default.info("\u5efa\u8bae\u5728\u7f16\u8f91\u5668\u4e2d\u8fdb\u884c\u641c\u7d22\uff0c\u9009\u4e2d\u7f16\u8f91\u5668\uff0c\u7136\u540e\u952e\u5165\u641c\u7d22\u5feb\u6377\u952e"))};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}));var onSearch=_react.default.useCallback(function(){var _ref=(0,_asyncToGenerator2.default)(_regenerator.default.mark((function _callee(val){var res,_res,_e$config$method,_e$response;return _regenerator.default.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(setLoading(!0),_context.prev=1,"js"!==type){_context.next=19;break}if(val=jsText,val){_context.next=6;break}return _context.abrupt("return");case 6:return _context.next=8,eval(val);case 8:if(res=_context.sent,200!==res.status){_context.next=17;break}return _context.t0=setJsonText,_context.t1=JSON,_context.next=14,res.json();case 14:_context.t2=_context.sent,_context.t3=_context.t1.stringify.call(_context.t1,_context.t2,null,2),(0,_context.t0)(_context.t3);case 17:_context.next=26;break;case 19:if(val=urlText,val){_context.next=22;break}return _context.abrupt("return");case 22:return _context.next=24,_axios.default.get(val.trim(),{responseType:"json",withCredentials:!0});case 24:_res=_context.sent,200===_res.status&&setJsonText(JSON.stringify(_res.data,null,2));case 26:_context.next=31;break;case 28:_context.prev=28,_context.t4=_context.catch(1),_message2.default.error(_context.t4.config?"".concat(null===(_e$config$method=_context.t4.config.method)||void 0===_e$config$method?void 0:_e$config$method.toUpperCase()," ").concat(_context.t4.config.url," (").concat((null===(_e$response=_context.t4.response)||void 0===_e$response?void 0:_e$response.status)||"-",")"):String(_context.t4));case 31:return _context.prev=31,setLoading(!1),_context.finish(31);case 34:case"end":return _context.stop()}}),_callee,null,[[1,28,31,34]])})));return function(e){return _ref.apply(this,arguments)}}(),[type,urlText,jsonText]);_react.default.useEffect((function(){onSearch()}),[]);var config=_react.default.useMemo((function(){try{return JSON.parse(transform.config)}catch(e){}return null}),[transform.config]);return _react.default.createElement(_configProvider.default,{locale:_zh_CN.default,theme:"light"},_react.default.createElement(_layout.default,{className:_AppModule.default.App,theme:"light"},_react.default.createElement(Header,{className:_AppModule.default.header},_react.default.createElement("span",{className:_AppModule.default.logo},"Transform json schema"),_react.default.createElement(_form.default.Item,{label:"\u8f6c\u6362\u7c7b\u578b",wrapperCol:{style:{width:150}}},_react.default.createElement(_select.default,{value:transform.type,className:_AppModule.default.select,onChange:function(e){setTransform((function(t){return(0,_objectSpread2.default)((0,_objectSpread2.default)({},t),{},{type:e})}))}},Object.keys(_modules.default).map((function(e){return _react.default.createElement(_select.default.Option,{key:e,value:e},e)})))),_react.default.createElement(_popover.default,{content:_react.default.createElement(_reactCodemirror.Controlled,{className:_AppModule.default.paramsEditor,value:transform.config,onBeforeChange:function(e,t,a){setTransform((function(e){return(0,_objectSpread2.default)((0,_objectSpread2.default)({},e),{},{config:a})}))},options:{mode:"application/json",theme:"material",smartIndent:!0,tabSize:2,lint:!0,foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter","CodeMirror-lint-markers"]}})},_react.default.createElement(_tooltip.default,{title:"\u8bbe\u7f6e\u8f6c\u6362\u914d\u7f6e",placement:"right"},_react.default.createElement(_button.default,{style:{marginLeft:10},icon:_react.default.createElement(_icons.SettingOutlined,null)}))),_react.default.createElement("div",{className:_AppModule.default.btns},_react.default.createElement(_select.default,{value:type,onChange:function(e){return setType(e)}},_react.default.createElement(_select.default.Option,{value:"url"},"\u4ece URL \u5bfc\u5165"),_react.default.createElement(_select.default.Option,{value:"js"},"\u4ece JS \u811a\u672c \u5bfc\u5165")),"url"===type&&_react.default.createElement(_input.default.Search,{value:urlText,onChange:function(e){return setUrlText(e.target.value)},enterButton:"\u5bfc\u5165",placeholder:"\u4ece URL \u5bfc\u5165",onSearch:onSearch,className:_AppModule.default.search}),"js"===type&&_react.default.createElement("div",{className:_AppModule.default.jsTextareaWrapper},_react.default.createElement(_popover.default,{destroyTooltipOnHide:!0,content:_react.default.createElement(TextArea,{autoFocus:!0,style:{width:400},rows:10,value:jsText,onChange:function(e){return setJsText(e.target.value)},placeholder:"\u8f93\u5165 JS \u8bf7\u6c42\u811a\u672c\uff0c\u5177\u4f53\u53ef\u4ee5\u4f7f\u7528 Chrome Network \u4e2d\u7684 Copy as fetch"}),trigger:"click"},_react.default.createElement(_input.default.Search,{readOnly:!0,onSearch:onSearch,className:_AppModule.default.jsTextarea,value:jsText,enterButton:"\u5bfc\u5165",placeholder:"\u8f93\u5165 JS \u8bf7\u6c42\u811a\u672c\uff0c\u5177\u4f53\u53ef\u4ee5\u4f7f\u7528 Chrome Network \u4e2d\u7684 Copy as fetch"}))))),_react.default.createElement(Content,{style:{padding:"0 50px"},className:_AppModule.default.body},_react.default.createElement(_spin.default,{spinning:loading,wrapperClassName:_AppModule.default.loading,delay:400},_react.default.createElement(_home.default,{type:transform.type,config:config,jsonText:jsonText,onJsonTextChange:setJsonText})))))}var _default=App;exports.default=_default},373:function(e,t,a){e.exports={App:"App_App__15LM-",header:"App_header__2L3DO",search:"App_search__13zFb",jsTextareaWrapper:"App_jsTextareaWrapper__25Ez6",jsTextarea:"App_jsTextarea__2yuDh",btns:"App_btns__15KWL",loading:"App_loading__3Rsj5",clickable:"App_clickable__Fqvmh",logo:"App_logo__2qPv-",body:"App_body__2a4FT",paramsEditor:"App_paramsEditor__oCSss"}},397:function(e,t,a){"use strict";var r=a(398),o=a(79);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(400);var n=o(a(402)),l=o(a(95)),u=o(a(132)),_=o(a(409));a(133);var c=o(a(63));a(87);var s=o(a(68));a(88);var i=o(a(89)),f=o(a(150)),d=r(a(0)),p=o(a(455)),m=o(a(410)),g=a(417),x=a(149),v=o(a(418)),b=a(146);a(419),a(420),a(421),a(422),a(423),a(147),a(424),a(425),a(426),a(92),a(148),a(428),a(429),a(430),a(93),a(431),a(432),a(433),a(434),a(435),a(436),a(437),a(438);var S=o(a(439)),y=o(a(440)),h=o(a(441)),k=new(o(a(442)).default),w=new h.default(k);window.jsonlint=y.default;var E=function(e){var t=e.text,a=d.default.useState(""),r=(0,f.default)(a,2),o=r[0],n=r[1],l=(0,d.useRef)(null),u=(0,d.useCallback)((function(){l.current&&(clearTimeout(l.current),l.current=null);try{(0,S.default)(t),n("ok")}catch(e){n("fail")}finally{l.current=setTimeout((function(){n()}),2e3)}}),[t]);return d.default.createElement("div",{className:v.default.floatBtns},d.default.createElement(s.default,{onVisibleChange:function(e){e||(l.current&&(clearTimeout(l.current),l.current=null),n())},title:o?"ok"===o?"\u590d\u5236\u6210\u529f":"\u590d\u5236\u5931\u8d25":"\u590d\u5236"},d.default.createElement(i.default,{icon:d.default.createElement(x.CopyFilled,null),size:"small",ghost:!0,onClick:u})))};var q=function(e){var t=e.type,a=void 0===t?"to-ts":t,r=e.config,o=e.defaultJsonText,S=e.jsonText,y=e.onJsonTextChange,h=(0,p.default)({value:S,onChange:y,defaultValue:o||"{}"}),k=(0,f.default)(h,2),q=k[0],T=k[1],C=d.default.useState(""),j=(0,f.default)(C,2),R=j[0],A=j[1],L=d.default.useState(!1),N=(0,f.default)(L,2),M=N[0],O=N[1],D=(0,d.useRef)(!0);return d.default.useEffect((function(){if(D.current)D.current=!1;else try{var e=JSON.parse(q);e&&(O(!0),w.postMessage([a,e,r]).then((function(e){A(e)})).catch((function(e){e&&(console.error(e),c.default.error(String(e)))})).finally((function(){return O(!1)})))}catch(t){console.error(t)}}),[a,r,q]),d.default.createElement("div",{className:v.default.container},d.default.createElement(b.Controlled,{className:v.default.jsonEditor,value:q,onBeforeChange:function(e,t,a){T(a)},options:{mode:"application/json",theme:"material",lineNumbers:!0,smartIndent:!0,tabSize:2,lint:!0,foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter","CodeMirror-lint-markers"]}}),M&&d.default.createElement("div",{className:v.default.transfroming},d.default.createElement(x.LoadingOutlined,{style:{fontSize:20,color:"#1890ff"}})),"string"===typeof R&&d.default.createElement("div",{className:v.default.wrapperResult},d.default.createElement(b.Controlled,{className:v.default.resultEditor,value:R,onBeforeChange:function(e,t,a){A(a)},options:{mode:"text/typescript",theme:"material",lineNumbers:!0,smartIndent:!0,lineWrapping:!0,tabSize:2,foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter","CodeMirror-lint-markers"]}}),d.default.createElement(E,{text:R})),"object"===(0,_.default)(R)&&R&&d.default.createElement("div",{className:v.default.wrapperResult},d.default.createElement(n.default,{size:"small",tabBarGutter:0,tabPosition:"left",defaultActiveKey:Object.keys(R)[0],tabBarExtraContent:d.default.createElement(s.default,{title:"\u4e0b\u8f7d ZIP"},d.default.createElement(i.default,{size:"small",type:"primary",onClick:function(){var e=new m.default;Object.keys(R).forEach((function(t){e.file(t,R[t])})),e.generateAsync({type:"blob"}).then((function(e){(0,g.saveAs)(e,"transform-json-schema-result.zip")}))}},"\u4e0b\u8f7d"))},Object.keys(R).map((function(e){return d.default.createElement(n.default.TabPane,{tab:e,key:e},d.default.createElement(b.Controlled,{className:v.default.subEditor,value:R[e],onBeforeChange:function(t,a,r){A((0,u.default)((0,u.default)({},R),{},(0,l.default)({},e,r)))},options:{mode:"text/typescript",theme:"material",lineNumbers:!0,smartIndent:!0,lineWrapping:!0,tabSize:2,foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter","CodeMirror-lint-markers"]}}),d.default.createElement(E,{text:R[e]}))})))))};t.default=q},418:function(e,t,a){e.exports={result:"style_result__sHPbb",floatBtns:"style_floatBtns__3vRWO",container:"style_container__TPmxo",transfroming:"style_transfroming__umP0B",jsonEditor:"style_jsonEditor__dG7Rz",resultEditor:"style_resultEditor__1ZfRb",wrapperResult:"style_wrapperResult__2yfYP",subEditor:"style_subEditor__39vb3"}},442:function(e,t,a){"use strict";function r(){return new Worker(a.p+"static/js/transform-worker.e2ddeb20.worker.js")}a.r(t),a.d(t,"default",(function(){return r}))},443:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(444),o=a(445),n=o.keys().reduce((function(e,t){return e[(0,r.basename)(t,(0,r.extname)(t))]=o(t),e}),{});t.default=n},445:function(e,t,a){var r={"./to-swagger-axios.js":446,"./to-ts.js":447,"./to-vm.js":448,"./to-walli.js":449};function o(e){var t=n(e);return a(t)}function n(e){if(!a.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=n,e.exports=o,o.id=445},446:function(e,t){},447:function(e,t){},448:function(e,t){},449:function(e,t){},450:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){};t.default=r}},[[153,1,2]]]);
//# sourceMappingURL=main.539adb09.chunk.js.map